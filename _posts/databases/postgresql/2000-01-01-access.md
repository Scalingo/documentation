---
title: Access Scalingo PostgresSQL Databases
nav: Access Databases
modified_at: 2019-09-13 09:00:00
tags: databases
index: 2
---

By default Scalingo databases are not available for direct connection
access from the Internet. They are only available inside Scalingo's internal
network. Therefore, your applications on Scalingo can connect directly to the
databases.

Apart from your applications there are different solutions to access Scalingo
PostgreSQL databases:

* Remote console: an interactive console is started and you access it directly.
* Adminer: a web based console.
* Encrypted tunnel: will let you access the database as if it was running locally.
* Direct encrypted access to the database.

## Interactive Remote Console

{% include info_command_line_tool.md %}

The following commands let you open a console for the Scalingo PostgreSQL
database attached to the application `my-app`. Note that your should have
provisionned the appropriate addon from your application dashboard prior to
run one of these commands.

```bash
# Open a console using the `psql` client
scalingo --app my-app pgsql-console
```

### Manually install the databases CLI in one-off

If you started a Bash process in a [one-off container]({% post_url platform/app/2000-01-01-tasks%}),
you can download various CLI tools for all databases available at Scalingo:

* PostgreSQL: `psql`, `pg_basebackup`, `pg_controldata`, `pg_dump`, `pg_isready`, `pg_recvlogical`,
  `pg_restore`, `pg_test_fsync`, `pg_upgrade`, `pg_archivecleanup`, `pg_config`, `pg_ctl`,
  `pg_dumpall`, `pg_receivewal`, `pg_resetwal`, `pg_rewind`, `pg_test_timing` and `pg_waldump`,

{% include dbclient_fetcher.md %}

## Adminer

[Adminer](https://www.adminer.org/) is a web application to administrate
various databases (MySQL, PostgreSQL, MongoDB and Elasticsearch). It can be
seen as a phpMyAdmin for more than just MySQL databases.

The application is available on the platform to use alongside your databases:
- Zone Paris (Outscale): [https://adminer.osc-fr1.scalingo.com](https://adminer.osc-fr1.scalingo.com)
- Zone Paris (Agora): [https://adminer.agora-fr1.scalingo.com](https://adminer.agora-fr1.scalingo.com).

The Server, Username, Password and Database fields must be filled with the
information in your `SCALINGO_POSTGRESQL_URL` environment variable. This
variable has the following form:

```
SCALINGO_POSTGRESQL_URL=<scheme>://<username>:<password>@<server host>:<server port>/<DB name>
```

For example, if your variable is:

```
SCALINGO_POSTGRESQL_URL=postgres://app_5942:random_password@b11e65b8-b36a-4369-bcf6-73b6b9439e84.app-5942.postgresql.dbs.scalingo.com:31313/app_5942?sslmode=prefer
```

You need to fill the Adminer form with these values:

- System: `PostgreSQL`,
- Server: `b11e65b8-b36a-4369-bcf6-73b6b9439e84.app-5942.postgresql.dbs.scalingo.com:31313`,
- Username: `app_5942`,
- Password: `random_password`,
- Database: `app_5942`.

Note that the *Server* input must be in the form *host:port*.

## Encrypted Tunnel

Since we don't want unencrypted network traffic from/to your databases, the
DB tunnel provides an encrypted way to access them.  However, it does not
provide any additional security layer. We will only verify that your public key
is registered on our platform. The DB tunnel is an encrypted bridge
between your laptop and our infrastructure.

Another possibility is to make your database [accessible from
internet](#direct-access).

### Requirements

You need to have Scalingo's [command line interface](http://cli.scalingo.com) to
achieve this action.

### Build the tunnel

By running the following command, an encrypted SSH tunnel will be built between you and your database.

```bash
$ scalingo --app my-app db-tunnel SCALINGO_POSTGRESQL_URL
Building tunnel to <dbhost>:<dbport>
You can access your database on '127.0.0.1:<localport>'
```

{% note %}
  We use MONGO\_URL in the example, but it can be REDIS\_URL or DATABASE\_URL according to the database you're using.
{% endnote %}

{% warning %}
If your MongoDB database uses Business plan, you have a replica set. It is not possible to access a
replica set using the DB tunnel. You should [enable Direct Acess](#direct-access) to your database.
The reason is that the DB tunnel is designed to connect to only one node. On the other hand, MongoDB
clients require to reach all the instances of the replica set to work.
{% endwarning %}

### Use any client to read, import or export your data

Once the tunnel has been built, you can use any tool you need by connecting it to the
`127.0.0.1:<localport>` host.

{% note %}
  Credentials to connect to the database are still the same, so read them from `scalingo --app my-app env`
{% endnote %}

### Example

```bash
$ scalingo --app my-app db-tunnel MONGO_URL
Building tunnel to <dbhost>:<dbport>
You can access your database on '127.0.0.1:10000'

# In another terminal
$ scalingo --app my-app env | grep MONGO_URL
MONGO_URL=mongo://user:secret@<dbhost>:<dbport>/database?options

$ mongo "mongo://user:secret@<dbhost>:<dbport>/database?options"
$ mongodump -u user -p secret -h localhost:10000 -d database
```

If you are connecting to the database using SSL/TLS, you should add both options `--ssl` and
`--sslAllowInvalidCertificates` to the `mongo` command.

### Build the tunnel with the OpenSSH client

Our command line tool handles it in a single command, but you might want to use
the tunnel without it. With the standard OpenSSH client, the way to build the
tunnel is:

```
ssh -L <local port>:<database host>:<database port> git@<SSH hostname>:<SSH port> -N
```

The SSH hostname and port depend on the region of your application:

{% include ssh_urls.md %}

The database host and database port can be found in the environment variable
representing the connection string of your database instance. Get it from the
dashboard or with the `env` command of the CLI. It should look like:

* `SCALINGO_<TYPE>_URL`

The value of this variable is an URL which represents:

```
scheme://user:password@host:port/database_name
```

As stated previously, you need to get the `host` and `port` from the URL.

Example:

If the environment variable is the following:

```
SCALINGO_POSTGRESQL_URL=postgresql://user:secret@my-db.postgresql.dbs.appsdeck.eu:30000/my-db
```

The command to run is:

```
ssh -L 10000:my-db.postgresql.dbs.appsdeck.eu:30000 git@scalingo.com -N
```

Then you connect on `localhost:10000` to reach your Scalingo database. (You'll still need to authenticate to the
database with the credential you can get from the connection string)

## Direct Internet Access

It is possible to make your database reachable from anywhere on the Internet.
Head to your database dashboard. From there you first need to force TLS
connections to your database. You can then toggle "Direct Internet Access" to
make it reachable from the Internet.
